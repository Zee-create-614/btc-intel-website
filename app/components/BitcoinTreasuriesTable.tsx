'use client'\n\nimport { useEffect, useState } from 'react'\nimport { formatBTCAmount, formatUSDValue, formatPercentage, type BitcoinTreasuryData } from '../lib/bitcointreasuries-live'\n\ninterface Props {\n  treasuriesData?: BitcoinTreasuryData\n}\n\nexport default function BitcoinTreasuriesTable({ treasuriesData }: Props) {\n  const [data, setData] = useState<BitcoinTreasuryData | null>(treasuriesData || null)\n  const [loading, setLoading] = useState(!treasuriesData)\n  \n  useEffect(() => {\n    if (!treasuriesData) {\n      loadTreasuriesData()\n    }\n  }, [treasuriesData])\n  \n  const loadTreasuriesData = async () => {\n    try {\n      const { getLiveBitcoinTreasuries } = await import('../lib/bitcointreasuries-live')\n      const result = await getLiveBitcoinTreasuries()\n      setData(result)\n    } catch (error) {\n      console.error('Failed to load treasuries data:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n  \n  if (loading) {\n    return (\n      <div className=\"bg-gray-900 border border-gray-700 rounded-lg p-6\">\n        <h2 className=\"text-xl font-bold text-white mb-4\">üèõÔ∏è Corporate Bitcoin Treasuries</h2>\n        <div className=\"text-gray-400\">Loading live data from bitcointreasuries.net...</div>\n      </div>\n    )\n  }\n  \n  if (!data || !data.companies.length) {\n    return (\n      <div className=\"bg-gray-900 border border-gray-700 rounded-lg p-6\">\n        <h2 className=\"text-xl font-bold text-white mb-4\">üèõÔ∏è Corporate Bitcoin Treasuries</h2>\n        <div className=\"text-red-400\">Failed to load treasuries data</div>\n      </div>\n    )\n  }\n  \n  return (\n    <div className=\"bg-gray-900 border border-gray-700 rounded-lg p-6\">\n      {/* Header - exact bitcointreasuries.net style */}\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-white mb-2\">üèõÔ∏è Publicly Traded Bitcoin Treasury Companies</h2>\n        <p className=\"text-gray-400\">\n          Track publicly traded companies holding Bitcoin on their balance sheets, ranked by BTC holdings.\n        </p>\n        <div className=\"mt-4 flex gap-6 text-sm\">\n          <div className=\"text-orange-400\">\n            <span className=\"text-gray-400\">Total Companies:</span> <span className=\"font-mono\">{data.companies.length}</span>\n          </div>\n          <div className=\"text-orange-400\">\n            <span className=\"text-gray-400\">Total BTC:</span> <span className=\"font-mono\">{formatBTCAmount(data.total_btc)} BTC</span>\n          </div>\n          <div className=\"text-orange-400\">\n            <span className=\"text-gray-400\">Total Value:</span> <span className=\"font-mono\">{formatUSDValue(data.total_value_usd)}</span>\n          </div>\n          <div className=\"text-orange-400\">\n            <span className=\"text-gray-400\">Supply:</span> <span className=\"font-mono\">{data.corporate_dominance_percentage.toFixed(3)}%</span>\n          </div>\n        </div>\n      </div>\n      \n      {/* Table Header - exact bitcointreasuries.net style */}\n      <div className=\"overflow-x-auto\">\n        <div className=\"min-w-full\">\n          <div className=\"grid grid-cols-[50px_1fr_80px_120px_100px] gap-4 py-3 border-b border-gray-700 text-sm font-medium text-gray-300\">\n            <div>Rank</div>\n            <div>Company</div>\n            <div>Ticker</div>\n            <div className=\"text-right\">Bitcoin</div>\n            <div className=\"text-right\">% Supply</div>\n          </div>\n          \n          {/* Table Rows - exact bitcointreasuries.net style */}\n          <div className=\"space-y-0\">\n            {data.companies.map((company, index) => (\n              <div \n                key={`${company.rank}-${company.ticker}`}\n                className={`grid grid-cols-[50px_1fr_80px_120px_100px] gap-4 py-4 border-b border-gray-800 hover:bg-gray-800/30 transition-colors ${\n                  index === 0 ? 'bg-orange-900/20 border-orange-700/30' : // Highlight #1 MicroStrategy\n                  index < 3 ? 'bg-gray-800/10' : '' // Top 3\n                }`}\n              >\n                {/* Rank */}\n                <div className=\"text-gray-400 font-mono text-sm flex items-center\">\n                  {company.rank}\n                </div>\n                \n                {/* Company Name & Country */}\n                <div className=\"flex items-center space-x-3\">\n                  <span className=\"text-lg\">{company.country_flag}</span>\n                  <div>\n                    <div className={`font-medium ${\n                      index === 0 ? 'text-orange-400' : 'text-white'\n                    }`}>\n                      {company.name}\n                    </div>\n                    <div className=\"text-xs text-gray-500\">{company.country}</div>\n                  </div>\n                </div>\n                \n                {/* Ticker */}\n                <div className=\"flex items-center\">\n                  <span className={`font-mono text-sm px-2 py-1 rounded ${\n                    index === 0 ? 'bg-orange-900 text-orange-200' : 'bg-gray-800 text-gray-300'\n                  }`}>\n                    {company.ticker}\n                  </span>\n                </div>\n                \n                {/* Bitcoin Holdings */}\n                <div className=\"text-right flex items-center justify-end space-x-2\">\n                  <div>\n                    <div className={`font-mono ${\n                      index === 0 ? 'text-orange-400 text-lg font-bold' : 'text-white'\n                    }`}>\n                      ‚Çø {formatBTCAmount(company.btc_holdings)}\n                    </div>\n                    <div className=\"text-xs text-gray-400\">\n                      {formatUSDValue(company.btc_value_usd)}\n                    </div>\n                  </div>\n                </div>\n                \n                {/* Percentage */}\n                <div className=\"text-right flex items-center justify-end\">\n                  <span className={`font-mono text-sm ${\n                    index === 0 ? 'text-orange-400 font-bold' : 'text-gray-300'\n                  }`}>\n                    {company.btc_percentage ? formatPercentage(company.btc_percentage) : '‚Äî'}\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n      \n      {/* Footer - bitcointreasuries.net style */}\n      <div className=\"mt-6 pt-4 border-t border-gray-700\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\n          <div>\n            <div className=\"text-gray-400\">Top 10 Holdings</div>\n            <div className=\"text-orange-400 font-mono font-bold\">\n              ‚Çø {formatBTCAmount(data.top_10_total)}\n            </div>\n          </div>\n          <div>\n            <div className=\"text-gray-400\">Market Dominance</div>\n            <div className=\"text-orange-400 font-mono font-bold\">\n              {data.corporate_dominance_percentage.toFixed(3)}% of supply\n            </div>\n          </div>\n          <div>\n            <div className=\"text-gray-400\">Last Updated</div>\n            <div className=\"text-gray-300 font-mono\">\n              {new Date(data.last_updated).toLocaleString()}\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"mt-4 text-xs text-gray-500\">\n          <p>Data source: bitcointreasuries.net ‚Ä¢ Real-time corporate Bitcoin holdings</p>\n        </div>\n      </div>\n    </div>\n  )\n}"